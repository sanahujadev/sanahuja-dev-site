---
import Container from "./Container.astro"
import Avatar from "./Avatar.astro";

const { t } = Astro.props;

type Review = {
    name: string;
    role: string;
    text: string;
    avatarSrc: string | null;
    avatarAlt: string;
};
---

<div class="text-text-muted dark:text-text-muted-dark" id="reviews">
  <Container>
    <div class="mb-20 space-y-4 px-6 md:px-0">
      <h2 class="text-center text-2xl font-bold text-text-stronger dark:text-text-default-dark md:text-4xl">
        {t.headline}
      </h2>
    </div>
     {/* The magic happens here, mon cher. One elegant loop, zero repetition. */}
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {t.reviews.map((review: Review) => (
        <div class="aspect-auto p-8 border border-border-default rounded-3xl bg-bg-surface dark:bg-bg-surface-dark dark:border-border-default-dark shadow-2xl shadow-shadow-default dark:shadow-none">
          <div class="flex gap-4">
            
            {/* Our Avatar component plays its hand, handling the image or monogram with grace */}
            <Avatar src={review.avatarSrc} name={review.name} alt={review.avatarAlt} />

            <div>
              <h6 class="text-lg font-medium text-text-strong dark:text-text-default-dark">{review.name}</h6>
              <p class="text-sm text-text-subtle dark:text-text-muted-dark">{review.role}</p>
            </div>
          </div>
          <p class="mt-8">{review.text}</p>
        </div>
      ))}
    </div>
  </Container>
</div>